"use strict";new Vue({el:"#app",data:function(){return{audio:null,circleLeft:null,barWidth:null,duration:null,currentTime:null,isTimerPlaying:!1,tracks:[{name:"寒鸦少年",artist:"华晨宇",cover:"https://img-1253324855.cos.ap-chengdu.myqcloud.com/myweb/articles/vda/20200529223558.png",source:"https://img-1253324855.cos.ap-chengdu.myqcloud.com/music/%E5%8D%8E%E6%99%A8%E5%AE%87%20-%20%E5%AF%92%E9%B8%A6%E5%B0%91%E5%B9%B4.mp3",url:"https://music.163.com/song?id=1407358755&userid=15433008",favorited:!0},{name:"齐天大圣",artist:"华晨宇",cover:"https://img-1253324855.cos.ap-chengdu.myqcloud.com/myweb/articles/vda/20200529224550.png",source:"https://img-1253324855.cos.ap-chengdu.myqcloud.com/music/%E9%BD%90%E5%A4%A9%E5%A4%A7%E5%9C%A3-%E5%8D%8E%E6%99%A8%E5%AE%87%20.mp3",url:"https://music.163.com/song?id=1407358755&userid=15433008",favorited:!0},{name:"我不管",artist:"华晨宇",cover:"https://img-1253324855.cos.ap-chengdu.myqcloud.com/myweb/articles/vda/20200529224300.png",source:"https://img-1253324855.cos.ap-chengdu.myqcloud.com/music/%E5%8D%8E%E6%99%A8%E5%AE%87%20-%20%E6%88%91%E7%AE%A1%E4%BD%A0.mp3",url:"https://music.163.com/song?id=1407358755&userid=15433008",favorited:!0},{name:"电子羊",artist:"某幻&中国Boy",cover:"https://img-1253324855.cos.ap-chengdu.myqcloud.com/myweb/articles/vda/20200529224032.png",source:"https://img-1253324855.cos.ap-chengdu.myqcloud.com/music/%E7%94%B5%E5%AD%90%E7%BE%8A%20-%20%E6%9F%90%E5%B9%BB%E5%90%9B%2C%E4%B8%AD%E5%9B%BDBOY.mp3",url:"https://music.163.com/song?id=1407358755&userid=15433008",favorited:!0},{name:"烟火里的尘埃",artist:"华晨宇",cover:"https://img-1253324855.cos.ap-chengdu.myqcloud.com/myweb/articles/vda/20200529223910.png",source:"https://img-1253324855.cos.ap-chengdu.myqcloud.com/music/%E5%8D%8E%E6%99%A8%E5%AE%87%20-%20%E7%83%9F%E7%81%AB%E9%87%8C%E7%9A%84%E5%B0%98%E5%9F%83.mp3",url:"https://music.163.com/song?id=1407358755&userid=15433008",favorited:!0},{name:"你要相信这不是最后一天",artist:"华晨宇",cover:"https://img-1253324855.cos.ap-chengdu.myqcloud.com/myweb/articles/vda/20200529223144.png",source:"https://img-1253324855.cos.ap-chengdu.myqcloud.com/music/%E4%BD%A0%E8%A6%81%E7%9B%B8%E4%BF%A1%E8%BF%99%E4%B8%8D%E6%98%AF%E6%9C%80%E5%90%8E%E4%B8%80%E5%A4%A9%20-%20%E5%8D%8E%E6%99%A8%E5%AE%87.mp3",url:"https://music.163.com/song?id=1407358755&userid=15433008",favorited:!0},{name:"给你给我",artist:"毛不易",cover:"https://img-1253324855.cos.ap-chengdu.myqcloud.com/music/109951163352188380.jpg",source:"https://img-1253324855.cos.ap-chengdu.myqcloud.com/music/%E7%BB%99%E4%BD%A0%E7%BB%99%E6%88%91%20-%20%E6%AF%9B%E4%B8%8D%E6%98%93.mp3",url:"https://music.163.com/song?id=1407358755&userid=15433008",favorited:!0},{name:"好想爱这个世界",artist:"华晨宇",cover:"https://img-1253324855.cos.ap-chengdu.myqcloud.com/music/maxresdefault.jpg",source:"https://img-1253324855.cos.ap-chengdu.myqcloud.com/music/%E5%A5%BD%E6%83%B3%E7%88%B1%E8%BF%99%E4%B8%AA%E4%B8%96%E7%95%8C%E5%95%8A%20-%20%E5%8D%8E%E6%99%A8%E5%AE%87.mp3",url:"https://music.163.com/song?id=1407358755&userid=15433008",favorited:!0},{name:"没有理想的人不伤心 (Remix版)",artist:"新裤子",cover:"https://img-1253324855.cos.ap-chengdu.myqcloud.com/music/f0250c6a9b4f4134baabdaa7a40312d4.jpeg",source:"https://img-1253324855.cos.ap-chengdu.myqcloud.com/music/%E6%B2%A1%E6%9C%89%E7%90%86%E6%83%B3%E7%9A%84%E4%BA%BA%E4%B8%8D%E4%BC%A4%E5%BF%83%20%28Remix%E7%89%88%29%20-%20%E6%96%B0%E8%A3%A4%E5%AD%90.mp3",url:"https://music.163.com/song?id=1305364671&userid=15433008",favorited:!1}],currentTrack:null,currentTrackIndex:0,transitionName:null}},methods:{play:function(){this.audio.paused?(this.audio.play(),this.isTimerPlaying=!0):(this.audio.pause(),this.isTimerPlaying=!1)},generateTime:function(){var t=100/this.audio.duration*this.audio.currentTime;this.barWidth=t+"%",this.circleLeft=t+"%";var i=Math.floor(this.audio.duration/60),s=Math.floor(this.audio.duration-60*i),e=Math.floor(this.audio.currentTime/60),t=Math.floor(this.audio.currentTime-60*e);e<10&&(e="0"+e),t<10&&(t="0"+t),this.duration=(i=i<10?"0"+i:i)+":"+(s=s<10?"0"+s:s),this.currentTime=e+":"+t},updateBar:function(t){var i=this.$refs.progress,s=this.audio.duration,i=100*(t-i.offsetLeft)/i.offsetWidth;this.barWidth=(i=(i=100<i?100:i)<0?0:i)+"%",this.circleLeft=i+"%",this.audio.currentTime=s*i/100,this.audio.play()},clickProgress:function(t){this.isTimerPlaying=!0,this.audio.pause(),this.updateBar(t.pageX)},prevTrack:function(){this.transitionName="scale-in",this.isShowCover=!1,0<this.currentTrackIndex?this.currentTrackIndex--:this.currentTrackIndex=this.tracks.length-1,this.currentTrack=this.tracks[this.currentTrackIndex],this.resetPlayer()},nextTrack:function(){this.transitionName="scale-out",this.isShowCover=!1,this.currentTrackIndex<this.tracks.length-1?this.currentTrackIndex++:this.currentTrackIndex=0,this.currentTrack=this.tracks[this.currentTrackIndex],this.resetPlayer()},resetPlayer:function(){var t=this;this.barWidth=0,this.circleLeft=0,this.audio.currentTime=0,this.audio.src=this.currentTrack.source,setTimeout(function(){t.isTimerPlaying?t.audio.play():t.audio.pause()},300)},favorite:function(){this.tracks[this.currentTrackIndex].favorited=!this.tracks[this.currentTrackIndex].favorited}},created:function(){var t=this;this.currentTrack=this.tracks[0],this.audio=new Audio,this.audio.src=this.currentTrack.source,this.audio.ontimeupdate=function(){t.generateTime()},this.audio.onloadedmetadata=function(){t.generateTime()},this.audio.onended=function(){t.nextTrack(),this.isTimerPlaying=!0};for(var i=0;i<this.tracks.length;i++){var s=this.tracks[i],e=document.createElement("link");e.rel="prefetch",e.href=s.cover,e.as="image",document.head.appendChild(e)}}});